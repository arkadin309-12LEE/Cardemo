---
fileClass: Work-Plan-Sprint
파일명: DP03_S13_스프린트_데이터관리.md
범주:
  - 작업상세계획서
  - Sprint
작성일: 2025-09-19
스프린트: 13
상태: 계획됨
tags: [스프린트, Phase3]
---

# Sprint 13 (13주차): 설정 - 데이터 관리

> **이번 주 목표**: 사용자의 소중한 데이터가 사라지지 않도록, 데이터를 외부로 저장(백업)하고 다시 불러올(복원) 수 있는 기능을 구현합니다.
> 
> **사용자 테스트 목표**: 핸드폰을 바꾸기 전에 모든 카드와 덱 정보를 파일 하나로 백업할 수 있다.

---

## 상세 작업 목록

- [ ] **데이터 백업(내보내기) 기능** (총 10시간)
    1. [ ] **(DB 조회)**: `DatabaseHelper`에 모든 카드와 덱 정보를 `Map`의 리스트(`List<Map>`) 형태로 가져오는 `exportData()` 메소드를 구현합니다.
    2. [ ] **(JSON 변환)**: 가져온 데이터를 `{'cards': [...], 'decks': [...]}` 와 같은 구조의 `Map`으로 묶고, `jsonEncode` 함수를 사용해 전체를 하나의 JSON 문자열로 변환합니다.
    3. [ ] **(파일 저장)**: 변환된 JSON 문자열을 `backup.json`과 같은 이름의 파일로 앱의 임시 디렉토리에 저장합니다.
    4. [ ] **(공유 기능)**: `share_plus` 패키지의 `Share.shareFiles` 메소드를 호출하여, 생성된 백업 파일을 사용자가 이메일, 클라우드 등으로 내보낼 수 있게 합니다.

- [ ] **데이터 복원(가져오기) 기능** (총 8시간)
    1. [ ] **(파일 선택)**: `file_picker` 패키지를 사용하여 사용자가 기기에서 백업 JSON 파일을 선택할 수 있게 합니다.
    2. [ ] **(경고 UI)**: 파일을 선택하면, “기존의 모든 데이터가 삭제되고 복원됩니다. 계속하시겠습니까?” 라는 `AlertDialog`를 반드시 보여줍니다.
    3. [ ] **(데이터 파싱)**: 사용자가 ‘확인’을 누르면, 파일의 내용을 읽어 `jsonDecode`로 파싱합니다.
    4. [ ] **(DB 재구성)**: 기존 DB의 모든 데이터를 `DELETE`한 후, 파싱된 데이터로 `Card`와 `Deck` 객체 리스트를 만들어 `INSERT`하는 `importData()` 메소드를 `DatabaseHelper`에 구현하고 호출합니다.
    5. [ ] **(피드백)**: 복원이 완료되면 앱을 재시작하거나, 상태를 모두 새로고침하여 복원된 데이터가 화면에 표시되게 합니다.

- [ ] **데이터 초기화 기능** (총 4시간)
    1. [ ] **(UI)**: 설정 화면에 ‘모든 데이터 초기화’ 메뉴 버튼을 추가합니다.
    2. [ ] **(경고 UI)**: 버튼 클릭 시, “정말로 모든 카드와 덱을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.” 라는 `AlertDialog`를 보여줍니다.
    3. [ ] **(DB 초기화)**: `DatabaseHelper`에 `clearAllData()` 메소드를 만들고, 모든 테이블의 데이터를 `DELETE`하도록 구현합니다.
    4. [ ] **(로직)**: 사용자가 ‘삭제’를 선택하면 `clearAllData()`를 호출하고, 앱의 모든 상태를 초기화하여 빈 화면을 보여줍니다.
